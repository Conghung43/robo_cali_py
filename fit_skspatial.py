from skspatial.objects import Line
from skspatial.objects import Points
from skspatial.plotting import plot_3d
from skspatial.objects import Plane
import geometry_calculation as cal
import math

def line_best_fit(points):

    points = Points(points)

    line_fit = Line.best_fit(points)

    return line_fit

def plane_best_fit(points):

    points = Points(points)

    plane_fit = Plane.best_fit(points)

    return plane_fit

# def get_point_in_plane(plane_fit):


# points = [[-154.3015566739169, 14.29776685888117, 577.0000221946023], [-130.92357982288706, 12.361877528103916, 575.9091242009944], [-109.84913912686434, 10.479419274763627, 577.3636752041904], [-88.07448855313388, 8.58057637648149, 578.3636585582386], [-65.1456229469993, 6.654156121340665, 577.5454711914062], [-42.10764971646395, 4.733159585432573, 576.727294921875], [-20.56534905867143, 2.8233687660910864, 577.0909201882102], [2.391836415637623, 0.7357283722270619, 576.4545676491477], [24.74294489080256, -0.9985503012483771, 575.0000332919034], [47.62744001908736, -2.9048542976379395, 575.0909645774148], [68.90314622358842, -4.795790108767423, 573.2727328213779], [91.79733276367188, -6.516882679679177, 572.7272838245739], [114.49059503728694, -8.555135293440385, 570.5455044833096], [136.61184137517756, -10.6408109664917, 571.727294921875], [160.84658674760297, -13.074495142156428, 572.7272727272727], [182.2080438787287, -15.727754766290838, 568.8182262073864], [207.0548553466797, -17.03106689453125, 569.4000244140625], [228.14845428466796, -19.463539123535156, 568.8000122070313], [253.25570678710938, -20.149084091186523, 567.8182151100852], [269.2584228515625, -23.578112602233887, 568.0000305175781], [55.42946728793058, -197.18501420454547, 578.7273115678267], [57.497575933283024, -177.21400451660156, 576.727294921875], [59.22966038097035, -158.37233248623934, 578.3636641068892], [61.13728401877663, -140.92276000976562, 578.272743918679], [62.142324621027164, -121.33475078235973, 576.2727661132812], [64.12313946810636, -102.86858992143111, 576.909102006392], [65.43955369429155, -84.2959941517223, 574.7273004705256], [66.66296525435014, -65.77646914395419, 574.8182206587358], [68.3945576060902, -47.0714673128995, 574.8182040127841], [69.86699329723011, -29.539445530284535, 574.0909312855114], [72.06902243874289, -10.529438799077814, 575.0909479314631], [73.28159262917258, 7.318910945545543, 575.0909423828125], [74.40809908780184, 26.461584958163176, 573.0909090909091], [76.1558671431108, 44.7063532742587, 574.5454933860085], [77.85080649636008, 63.57825678045099, 573.0000055486506], [79.88976287841797, 80.81198328191584, 574.0000110973011], [81.65036565607244, 100.18132227117366, 573.0], [83.01915879683061, 118.73636973987927, 571.7273004705256], [84.32889834317294, 137.80821228027344, 570.0909590287642], [86.16540804776278, 155.7451865456321, 569.7273060191761]]

# plane_fit = plane_best_fit(points)
# # plane_vector = plane_fit.vector.tolist()
# plane_point = plane_fit.point

# plane_value = cal.get_plane_equation_from_point_normal_vector(plane_fit.vector, plane_fit.point)

# find_z = (-plane_value[3] - plane_point[0]*plane_value[0] - (plane_point[0]+100)*plane_value[1])/plane_value[2]

# new_point = (plane_point[0], plane_point[0]+100, find_z)



# print(cal.get_angle_between_planes(plane_vector, [0,0,1]))
# print(cal.get_angle_between_planes(plane_vector, [0,1,0]))
# print(cal.get_angle_between_planes(plane_vector, [1,0,0]))

# print(line_best_fit([1]))
    # points = Points(
    #     [
    #         [0, 0, 0],
    #         [1, 1, 0],
    #         [2, 3, 2],
    #         [3, 2, 3],
    #         [4, 5, 4],
    #         [6, 5, 5],
    #         [6, 6, 5],
    #         [7, 6, 7],
    #     ],
    # )